<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Theme Editor</title>
    <META http-equiv="Content-Style-Type" content="text/css">
    <link rel="stylesheet" href="../style.css" type="text/css">
  </head>

  <body>
    <h1>Theme Editor</h1>

    テーマはTera Termの背景、文字の色、または、両方を一括して扱う枠組みです。<br>
    Theme Editorはテーマの編集を行うことができます。<br>
    複数のタブで設定を行います。<br>
    [OK] で動作中のTera Termに反映され、[Cancel] で反映されずに破棄されます。

    <dl>
      <dt><a href="#preview">Preview/File タブ</a></dt>
      <dd>テーマの一時的な設定(preview),テーマファイルの読み込みと書き出しを行います。</dd>
      <dt><a href="#bg">Background タブ</a></dt>
      <dd>BG(背景画像)に関する設定を行います。</dd>
      <dt><a href="#bg_alpha">Background image alpha タブ</a></dt>
      <dd>BG(背景画像)と文字背景色の透過設定を行います。</dd>
      <dt><a href="#color">Text color タブ</a></dt>
      <dd>文字の色に関する設定を行います。</dd>
    </dl>

    <a href="../setup/theme.html">テーマファイルについて</a>

    <hr>

    <h2 id="preview">Preview/File</h2>

    Preview<br>
    テーマの一時的な設定(Preview)、やり直し(Undo)を行います。
    <dl>
      <dt>[Preview]</dt>
      <dd>設定したテーマを一時的に設定(Preview)します。</dd>
      <dt>[Undo]</dt>
      <dd>変更したテーマをダイアログを開く前の状態に戻します。</dd>
    </dl>

    Theme File<br>
    テーマファイルからテーマを読み込み、テーマの保存をおこないます。
    <dl>
      <dt>[Load]</dt>
      <dd>テーマファイルを読み込みます。</dd>
      <dt>[Save]</dt>
      <dd>
        設定中のテーマをファイルに書き出します。<br>
        BGテーマ、Colorテーマ、または両方を書き出すか選択できます。
      </dd>
    </dl>

    <hr>

    <h2 id="bg">Background (背景テーマ)</h2>

    <h3>背景</h3>

    下から順に背景画像が合成されます。<br>
    <a href="#bg_overview">背景テーマのOverview</a>を参照ください。

    <dl>
      <dt>Simple color plane</dt>
      <dd>
        単色をアルファブレンドします。<br>
        例:背景画像,壁紙をブレンドした状態で少し暗くする場合は、黒をalpha半分の割合でアルファブレンドします。
        <dl>
          <dt>Color</dt>
          <dd>合成するプレーンの色</dd>

          <dt>Alpha (Opaque right):</dt>
          <dd>合成するアルファブレンド値</dd>
        </dl>
      </dd>

      <dt>Background Image</dt>
      <dd>
        背景画像を指定します。<br>
        画像ファイルによっては画素ごとの透明度情報も考慮します。
        <dl>
          <dt>画像ファイル名</dt>
          <dd>
            bmp, png, gif, jpg等<br>
            32bit bmp, 透過pngの場合は8bitのアルファチャンネルが付加されます<br>
            透過gifの場合は1色を透明としてあつかいます。
          </dd>

          <dt>パターン</dt>
          <dd>
            背景画像の描画方法を指定します。
            <ul>
              <li>stretch</li>
              <li>tile</li>
              <li>center</li>
              <li>fit_withh</li>
              <li>fit_height</li>
              <li>autofit</li>
              <li>autofill</li>
            </ul>
            (TODO 詳細を調べて書く)
          </dd>

          <dt>Color</dt>
          <dd>
            背景画像が描画されない部分がある場合この色で埋められます。<br>
            画像に透明部分が存在していてWindowsの壁紙画像を合成しない場合もこの色で埋められます。
          </dd>

          <dt>Alpha (Opaque right):</dt>
          <dd>
            Desktop wallpaper imageと合成するアルファブレンド値<br>
            透明から不透明まで選択できます<br>
          </dd>
        </dl>
      </dd>

      <dt>Desktop wallpaper image</dt>
      <dd>
        Windowsの壁紙画像
      </dd>

    </dl>

    <hr>

    <h2 id="bg_alpha">背景画像透過</h2>

    背景画像と文字背景色の透過設定
    <dl>
      <dt>通常文字背景色の透過(右が不透明):</dt>
      <dd>
        背景画像と通常文字背景色の透過<br>
        透明から不透明まで選択できます。<br>
        画像の1の箇所
      </dd>
      <dt>反転文字背景色の透過:</dt>
      <dd>
        背景画像と反転文字背景色の透過<br>
        透明から不透明まで選択できます。<br>
        画像の2の箇所
      </dd>
      <dt>その他の文字背景色の透過:</dt>
      <dd>
        背景画像とその他の文字背景色と透過<br>
        透明から不透明まで選択できます。<br>
        画像の3の箇所
      </dd>
      <dt>
    </dl>
    <img src="setup-additional-visual-theme-alpha.png"><br>
    1,3の部分が透明のとき、Tera Term 4 の透過と同様となります。

    <hr>

    <h2 id="color">Text Color (カラーテーマ)</h2>

    <p>
      カラーテーマはデフォルト色に上書きして色が設定されます。<br>
      <a href="#default_color">デフォルト色</a>はTERATERM.INI で設定されます。<br>
      カラーテーマのiniファイル内で設定しない色はデフォルト色となります。

    <p>
      このタブでは次のことができます。<br>
      <ul>
        <li>色の設定
        <li>デフォルトの色に戻す
      </ul>

    <p>
      色の設定はリストで色を選んで右クリック(orダブルクリック)で行えます。

    <p>
      今のところ commctrlのカラーピッカーを使用しています。<br>
      (TODO Tera Term内のカラーピッカーに切り替える?)

    <p>
      設定した色を表示する例
      <pre>
wget https://raw.githubusercontent.com/TeraTermProject/teraterm/main/tests/256colors2.pl -O - | perl
wget https://raw.githubusercontent.com/TeraTermProject/teraterm/main/tests/colortable16.sh -O - | sh
wget https://raw.githubusercontent.com/TeraTermProject/teraterm/main/tests/color-sgr-decscnm.pl -O - | perl</pre>

    <dl>
      <dt>[Default]</dt>
      <dd>デフォルト色を設定</dd>
    </dl>

    <hr>
    <h2 id="bg_overview">背景テーマのOverview</h2>

    Tera Term の背景画像は次のように合成されます。<br>
    <img src="setup-additional-visual-theme.png"><br>

    <hr>

<h2>色設定のOverview</h2>

Tera Term 5 alpha 時点の仕様

<pre>
+------------+          +-----------------------------------+         +---------+        +----------+
|TERATERM.INI| read     |Tera Term                          |         |Theme    |        |Theme File|
|            | (Startup)| +---------+          +----------+ |(launch) |Editor   |  Save  | INI      |
| Default    +------------&gt;         | Startup  |          +-----------&gt;         +--------&gt;          |
|  Colors    |          | | Default +----------&gt; Draw     | |         |         |        | Colors   |
|            &lt;------------+  Colors | Load     |  Colors  &lt;-----------+         &lt;--------+          |
|            |  Write   | |         | Default  |          | |   OK    |         |  Load  |          |
|            |          | +---------+          +----------+ |         |         |        |          |
+------------+          +-----------------------------------+         +---------+        +----------+
</pre>

<ul>
  <li>Tera Termのデフォルト色はTERATERM.INIから読み込む<br>
    描画色はデフォルト色となる<br>
    起動時に読み込むthemefileを指定していて、カラーテーマが含まれていると、テーマの色となる
  <li>Theme Editorで色をロード,編集してokを押すとTera Termの描画用の色となる
  <li>TERATERM.INIに保存するとデフォルト色が保存される
  <li>描画色をデフォルト色に持っていくことはできない
</ul>

    <h2 id="default_color">デフォルト色について</h2>

    デフォルト色とフォントは TERATERM.INI の次のキーワードで設定できます。
<pre>
| Attr \ ini    | font on/off       | color on/off           | color(R,G,B,R,G,B) |
|---------------|-------------------|------------------------|--------------------|
| Normal        | -                 | -                      | VTColor            |
| Bold          | EnableBold        | EnableBoldAttrColor    | VTBoldColor        |
| Blink         | -                 | EnableBlinkAttrColor   | VTBlinkColor       |
| Reverse       | -                 | EnableReverseAttrColor | VTReverseColor     |
| URL Underline | URLUnderline      | EnableURLColor         | URLColor           |
| Underline     | UnderlineAttrFont | UnderlineAttrColor     | VTUnderlineColor   |
</pre>

  </body>
</html>
